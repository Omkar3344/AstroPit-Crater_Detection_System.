<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü™ê</text></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Martian & Lunar Crater Detection</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Cosmic elements for background -->
    <div class="cosmic-elements"></div>
    <div class="satellite"></div>
    <div class="medium-planet"></div>
    <div class="small-moon"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="cosmic-dust"></div>

    <!-- Hero Section -->
    <section id="hero" class="hero-section">
        <div class="hero-space-bg">
            <div class="star star-1"></div>
            <div class="star star-2"></div>
            <div class="star star-3"></div>
            <div class="star star-4"></div>
            <div class="star star-5"></div>
            <div class="star star-6"></div>
            <div class="planet planet-mars"></div>
            <div class="planet planet-moon"></div>
            <div class="planet planet-distant"></div>
            <div class="orbital-ring"></div>
            <div class="satellite-hero"></div>
            <div class="hero-nebula"></div>

            <!-- Add these elements inside your hero-space-bg div -->
            <div class="orbital-system">
                <div class="sun"></div>
                <div class="orbit orbit-1">
                    <div class="planet planet-mercury"></div>
                </div>
                <div class="orbit orbit-2">
                    <div class="planet planet-venus"></div>
                </div>
                <div class="orbit orbit-3">
                    <div class="planet planet-earth">
                        <div class="moon-orbit">
                            <div class="moon"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="asteroid-belt"></div>
            <div class="comet"></div>
            <div class="galaxy-spiral"></div>
        </div>
        <div class="hero-content">
            <div class="brand-logo">AstroPit</div>
            <h1>Martian & Lunar Crater Detection</h1>
            <p>Advanced planetary surface analysis with YOLOv8</p>
            <a href="#upload" class="btn">Get Started</a>
        </div>
    </section>

    <!-- Upload Section -->
    <section id="upload" class="upload-section">
        <div class="container">
            <h2>Upload Your Image</h2>
            <p>Upload a planetary surface image to detect craters</p>
            
            <div class="upload-container" id="upload-area">
                <i class="upload-icon fas fa-cloud-upload-alt"></i>
                <h3>Upload File</h3>
                <p>Drag and drop a file here or click to browse</p>
                <input type="file" id="file-input" accept=".jpg,.jpeg,.png,.gif" style="display: none;">
                <button class="btn browse-btn" id="browse-btn">Browse Files</button>
                <button class="btn upload-btn" id="upload-btn" disabled>Detect Craters</button>
                <div id="file-preview" class="file-preview"></div>
                <p class="file-limit">Maximum file size: 2MB for images</p>
            </div>
        </div>
        
        <!-- Scanning Overlay -->
        <div class="scanning-overlay" style="display: none;">
            <div class="scanning-grid"></div>
            <div class="scanning-text">
                <span>Analyzing Planetary Surface</span>
                <div class="scanning-dots">
                    <span>.</span><span>.</span><span>.</span>
                </div>
            </div>
            <div class="scan-line"></div>
        </div>
    </section>

    <!-- Results Section -->
    <section id="results" class="results-section hidden">
        <div class="container">
            <h2>Detection Results</h2>
            <div id="result-status" class="result-status">
                <span id="result-message" class="result-message">Processing...</span>
            </div>
            
            <!-- Image Results -->
            <div id="image-results" class="result-content hidden">
                <div class="image-row">
                    <div class="original-image">
                        <h3>Original Image</h3>
                        <div class="image-container">
                            <img id="original-image" src="" alt="Original Image">
                        </div>
                        <a id="download-original" class="btn download-btn" download>
                            <i class="fas fa-download"></i> Download Original
                        </a>
                    </div>
                    <div class="detected-image">
                        <h3>Detected Craters</h3>
                        <div class="image-container">
                            <img id="result-image" src="" alt="Detection Results">
                        </div>
                        <a id="download-result" class="btn download-btn" download>
                            <i class="fas fa-download"></i> Download Result
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="result-actions">
                <button id="new-detection-btn" class="btn">
                    <i class="fas fa-upload"></i> Analyze Another Image
                </button>
            </div>

            <!-- Add this in your results section -->
            <div class="action-buttons">
                <!-- Your existing buttons -->
                <button id="view-3d-btn" class="btn action-btn">
                    <i class="fas fa-cube"></i> View in 3D
                </button>
            </div>
        </div>
    </section>

    <!-- Technical Data Section -->
    <section id="technical-data" class="technical-data-section hidden">
        <div class="container">
            <h2>Technical Data Analysis</h2>
            <p>Detailed analysis of detected craters in structured format</p>
            
            <div class="data-controls">
                <button id="copy-json-btn" class="btn small-btn">
                    <i class="fas fa-copy"></i> Copy JSON
                </button>
                <button id="download-json-btn" class="btn small-btn">
                    <i class="fas fa-download"></i> Download Data
                </button>
                <button id="toggle-format-btn" class="btn small-btn">
                    <i class="fas fa-code"></i> Toggle Format
                </button>
            </div>
            
            <div class="json-container">
                <pre id="crater-data-json">No crater data available yet.</pre>
            </div>
            
            <div class="statistics-row">
                <div class="stat-box">
                    <h3>Crater Count</h3>
                    <div class="stat-value" id="crater-count">0</div>
                </div>
                <div class="stat-box">
                    <h3>Average Size</h3>
                    <div class="stat-value" id="avg-size">0 px</div>
                </div>
                <div class="stat-box">
                    <h3>Confidence</h3>
                    <div class="stat-value" id="avg-confidence">0%</div>
                </div>
            </div>
        </div>
    </section>

    <!-- 3D Visualization Section -->
    <section id="visualization-3d" class="visualization-section hidden">
        <div class="container">
            <h2>3D Crater Visualization</h2>
            <div class="viz-controls">
                <button id="orbital-flight" class="btn small-btn">Orbital Flight</button>
                <button id="reset-camera" class="btn small-btn">Reset View</button>
            </div>
            <div class="viz-container">
                <div id="loading-3d" class="loading-indicator">
                    <div class="spinner"></div>
                    <span>Generating 3D model...</span>
                </div>
                <div id="crater-3d-container"></div>
            </div>
            <div class="viz-info">
                <p>Interactive 3D model based on crater detection data. Use mouse to rotate, scroll to zoom, and right-click to pan.</p>
                <p><span class="crater-count-3d">0</span> craters visualized in 3D space.</p>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="container">
            <h2>About the Technology</h2>
            <div class="tech-details">
                <div class="tech-item">
                    <i class="fas fa-brain tech-icon"></i>
                    <h3>YOLOv8 AI Model</h3>
                    <p>Utilizing state-of-the-art YOLOv8 object detection for accurate crater identification</p>
                </div>
                <div class="tech-item">
                    <i class="fas fa-globe tech-icon"></i>
                    <h3>Planetary Surface Analysis</h3>
                    <p>Specialized filters detect and validate planetary surface characteristics</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 3D Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFExporter.min.js"></script>
    <script src="/static/crater3d.js"></script>

    <script src="/static/script.js"></script>
</body>
</html>